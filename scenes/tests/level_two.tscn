[gd_scene load_steps=14 format=4 uid="uid://defnhonhw5r5g"]

[ext_resource type="Script" uid="uid://ca3tr65ahwjyx" path="res://scripts/level.gd" id="1_2hj3f"]
[ext_resource type="Script" uid="uid://dq5jifbceodtk" path="res://scripts/turn_manager.gd" id="2_xgrm8"]
[ext_resource type="Script" uid="uid://df2p7210oc6yr" path="res://scripts/turn_on_lights.gd" id="3_40n6h"]
[ext_resource type="Script" uid="uid://bvpmuuqij5vl2" path="res://scripts/items/flicking_light.gd" id="4_t8lgv"]
[ext_resource type="TileSet" uid="uid://c20yitjo5k43l" path="res://tilesets/dungeon_tileset_with_customdata.tres" id="5_q6wmg"]
[ext_resource type="TileSet" uid="uid://boc35lvpc35o6" path="res://tilesets/dungeon_tileset.tres" id="6_y6fix"]
[ext_resource type="PackedScene" uid="uid://gd8dbjwqf00" path="res://scenes/objects/doorway.tscn" id="7_0r5pm"]
[ext_resource type="PackedScene" uid="uid://ctcwh4vwupgl1" path="res://scenes/monster.tscn" id="8_6rts0"]
[ext_resource type="PackedScene" uid="uid://vq7rf4ypincf" path="res://scenes/objects/key.tscn" id="9_8857f"]
[ext_resource type="PackedScene" uid="uid://cug2kg3one7h2" path="res://scenes/player.tscn" id="10_ssggo"]
[ext_resource type="PackedScene" uid="uid://bfog256vyy4sw" path="res://scenes/ui/hud.tscn" id="11_iibss"]

[sub_resource type="Gradient" id="Gradient_sw5gm"]
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_m7216"]
gradient = SubResource("Gradient_sw5gm")
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0.5, 1)

[node name="Level" type="Node"]
script = ExtResource("1_2hj3f")

[node name="TurnManager" type="Node" parent="."]
script = ExtResource("2_xgrm8")

[node name="Lights" type="Node2D" parent="."]
visible = false
script = ExtResource("3_40n6h")

[node name="DarkWorld" type="DirectionalLight2D" parent="Lights"]
energy = 0.71
blend_mode = 1
metadata/_edit_lock_ = true

[node name="PointLight2D" type="PointLight2D" parent="Lights"]
position = Vector2(36, 41)
scale = Vector2(1.421875, 1.4375)
color = Color(0.89, 0.30616003, 0.1602, 1)
energy = 2.0
shadow_enabled = true
texture = SubResource("GradientTexture2D_m7216")
script = ExtResource("4_t8lgv")

[node name="PointLight2D2" type="PointLight2D" parent="Lights"]
position = Vector2(232.00002, 27)
scale = Vector2(1.421875, 1.4375)
color = Color(0.89, 0.30616003, 0.1602, 1)
energy = 2.0
shadow_enabled = true
texture = SubResource("GradientTexture2D_m7216")
script = ExtResource("4_t8lgv")

[node name="PointLight2D3" type="PointLight2D" parent="Lights"]
position = Vector2(286, 56)
scale = Vector2(1.421875, 1.4375)
color = Color(0.89, 0.30616003, 0.1602, 1)
energy = 2.0
shadow_enabled = true
texture = SubResource("GradientTexture2D_m7216")
script = ExtResource("4_t8lgv")

[node name="PointLight2D4" type="PointLight2D" parent="Lights"]
position = Vector2(104, 25)
scale = Vector2(1.421875, 1.4375)
color = Color(0.89, 0.30616003, 0.1602, 1)
energy = 2.0
shadow_enabled = true
texture = SubResource("GradientTexture2D_m7216")
script = ExtResource("4_t8lgv")

[node name="PointLight2D5" type="PointLight2D" parent="Lights"]
position = Vector2(153, 84)
scale = Vector2(1.421875, 1.4375)
color = Color(0.89, 0.30616003, 0.1602, 1)
energy = 2.0
shadow_enabled = true
texture = SubResource("GradientTexture2D_m7216")
script = ExtResource("4_t8lgv")

[node name="PointLight2D6" type="PointLight2D" parent="Lights"]
position = Vector2(35, 120)
scale = Vector2(1.421875, 1.4375)
color = Color(0.89, 0.30616003, 0.1602, 1)
energy = 2.0
shadow_enabled = true
texture = SubResource("GradientTexture2D_m7216")
script = ExtResource("4_t8lgv")

[node name="PointLight2D7" type="PointLight2D" parent="Lights"]
position = Vector2(285, 120.00001)
scale = Vector2(1.421875, 1.4375)
color = Color(0.89, 0.30616003, 0.1602, 1)
energy = 2.0
shadow_enabled = true
texture = SubResource("GradientTexture2D_m7216")
script = ExtResource("4_t8lgv")

[node name="PointLight2D8" type="PointLight2D" parent="Lights"]
position = Vector2(230, 163)
scale = Vector2(1.421875, 1.4375)
color = Color(0.89, 0.30616003, 0.1602, 1)
energy = 2.0
shadow_enabled = true
texture = SubResource("GradientTexture2D_m7216")
script = ExtResource("4_t8lgv")

[node name="PointLight2D9" type="PointLight2D" parent="Lights"]
position = Vector2(107, 165)
scale = Vector2(1.421875, 1.4375)
color = Color(0.89, 0.30616003, 0.1602, 1)
energy = 2.0
shadow_enabled = true
texture = SubResource("GradientTexture2D_m7216")
script = ExtResource("4_t8lgv")

[node name="Scenery" type="Node2D" parent="."]

[node name="DungeonBackground" type="TileMapLayer" parent="Scenery" groups=["dungeon", "tilemap"]]
unique_name_in_owner = true
tile_map_data = PackedByteArray("AAAQAAkAAAACAAMAAAAQAAgAAAAJAAAAAAAQAAcAAAAIAAEAAAAQAAYAAAAHAAEAAAAQAAUAAAAIAAEAAAAQAAQAAAABAAcAAAAQAAMAAAABAAcAAAAQAAIAAAADAAEAAAAQAAEAAAABAAAAAAAQAAAAAAAIAAcAAAAPAAkAAAACAAMAAAAPAAgAAAAIAAEAAAAPAAcAAAADAAIAAAAPAAYAAAAIAAEAAAAPAAUAAAAIAAEAAAAPAAQAAAADAAIAAAAPAAMAAAADAAIAAAAPAAIAAAACAAEAAAAPAAEAAAACAAAAAAAPAAAAAAAIAAcAAAAOAAkAAAADAAMAAAAOAAYAAAADAAIAAAAOAAUAAAAIAAEAAAAOAAQAAAAJAAEAAAAOAAMAAAAIAAEAAAAOAAIAAAADAAEAAAAOAAEAAAAEAAAAAAAOAAAAAAAIAAcAAAANAAkAAAACAAMAAAANAAYAAAAJAAIAAAANAAUAAAAJAAEAAAANAAQAAAAJAAEAAAANAAMAAAAIAAEAAAANAAIAAAADAAEAAAANAAEAAAADAAAAAAANAAAAAAAIAAcAAAAMAAkAAAADAAMAAAAMAAYAAAAHAAEAAAAMAAUAAAADAAcAAAAMAAQAAAABAAcAAAAMAAMAAAAIAAEAAAAMAAIAAAADAAEAAAAMAAEAAAACAAAAAAAMAAAAAAAIAAcAAAALAAkAAAADAAMAAAALAAYAAAACAAcAAAALAAUAAAAAAAcAAAALAAQAAAACAAcAAAALAAMAAAADAAIAAAALAAIAAAACAAEAAAALAAEAAAAEAAAAAAALAAAAAAAIAAcAAAAKAAkAAAADAAMAAAAKAAYAAAACAAcAAAAKAAUAAAACAAcAAAAKAAQAAAACAAcAAAAKAAMAAAADAAIAAAAKAAIAAAADAAEAAAAKAAEAAAABAAAAAAAKAAAAAAAIAAcAAAAJAAkAAAADAAMAAAAJAAYAAAACAAcAAAAJAAUAAAADAAcAAAAJAAQAAAACAAcAAAAJAAMAAAAJAAIAAAAJAAIAAAADAAcAAAAJAAEAAAAIAAMAAAAJAAAAAAAIAAcAAAAIAAkAAAACAAMAAAAIAAYAAAACAAcAAAAIAAUAAAACAAcAAAAIAAQAAAACAAcAAAAIAAMAAAAJAAIAAAAIAAIAAAADAAEAAAAIAAEAAAACAAAAAAAIAAAAAAAIAAcAAAAHAAkAAAADAAMAAAAHAAYAAAABAAcAAAAHAAUAAAABAAcAAAAHAAQAAAABAAcAAAAHAAMAAAADAAcAAAAHAAIAAAACAAEAAAAHAAEAAAAEAAAAAAAHAAAAAAAIAAcAAAAGAAkAAAACAAMAAAAGAAYAAAAJAAEAAAAGAAUAAAAIAAIAAAAGAAQAAAAAAAcAAAAGAAMAAAAIAAEAAAAGAAIAAAADAAEAAAAGAAEAAAAEAAAAAAAGAAAAAAAIAAcAAAAFAAkAAAADAAMAAAAFAAYAAAAIAAEAAAAFAAUAAAAIAAEAAAAFAAQAAAAIAAEAAAAFAAMAAAADAAIAAAAFAAIAAAABAAYAAAAFAAEAAAAEAAAAAAAFAAAAAAAIAAcAAAAEAAkAAAACAAMAAAAEAAYAAAADAAIAAAAEAAUAAAAIAAEAAAAEAAQAAAAIAAEAAAAEAAMAAAAJAAEAAAAEAAIAAAAAAAYAAAAEAAEAAAADAAAAAAAEAAAAAAAIAAcAAAATAAkAAAAIAAcAAAATAAgAAAAIAAcAAAATAAcAAAAIAAcAAAATAAYAAAAIAAcAAAATAAUAAAAIAAcAAAATAAQAAAAIAAcAAAATAAMAAAAIAAcAAAATAAIAAAAIAAcAAAATAAEAAAAIAAcAAAATAAAAAAAIAAcAAAASAAkAAAAFAAEAAAASAAgAAAAFAAEAAAASAAcAAAAFAAIAAAASAAYAAAAFAAIAAAASAAUAAAAFAAEAAAASAAQAAAAFAAIAAAASAAMAAAAFAAIAAAASAAIAAAAFAAMAAAASAAEAAAAFAAMAAAASAAAAAAAIAAcAAAARAAkAAAAEAAMAAAARAAgAAAAEAAIAAAARAAcAAAAEAAIAAAARAAYAAAAEAAIAAAARAAUAAAAEAAIAAAARAAQAAAAEAAIAAAARAAMAAAAEAAIAAAARAAIAAAADAAcAAAARAAEAAAADAAAAAAARAAAAAAAIAAcAAAADAAkAAAACAAMAAAADAAgAAAAAAAcAAAADAAcAAAACAAcAAAADAAYAAAADAAIAAAADAAUAAAADAAcAAAADAAQAAAAIAAEAAAADAAMAAAAJAAEAAAADAAIAAAABAAYAAAADAAEAAAACAAAAAAADAAAAAAAIAAcAAAACAAkAAAABAAMAAAACAAgAAAABAAIAAAACAAcAAAABAAIAAAACAAYAAAABAAIAAAACAAUAAAABAAIAAAACAAQAAAABAAIAAAACAAMAAAABAAIAAAACAAIAAAABAAEAAAACAAEAAAABAAAAAAACAAAAAAAIAAcAAAABAAkAAAAAAAMAAAABAAgAAAAAAAMAAAABAAcAAAAAAAIAAAABAAYAAAAAAAIAAAABAAUAAAAAAAIAAAABAAQAAAAAAAEAAAABAAMAAAAAAAEAAAABAAIAAAAAAAEAAAABAAEAAAAAAAAAAAABAAAAAAAIAAcAAAAAAAkAAAAIAAcAAAAAAAgAAAAIAAcAAAAAAAcAAAAIAAcAAAAAAAYAAAAIAAcAAAAAAAUAAAAIAAcAAAAAAAQAAAAIAAcAAAAAAAMAAAAIAAcAAAAAAAIAAAAIAAcAAAAAAAEAAAAIAAcAAAAAAAAAAAAIAAcAAAAEAAgAAAABAAcAAAAEAAcAAAACAAcAAAANAAgAAAAIAAEAAAAMAAgAAAADAAIAAAALAAgAAAAIAAEAAAAKAAgAAAADAAIAAAAJAAgAAAADAAIAAAAIAAgAAAAJAAEAAAAHAAgAAAADAAIAAAAGAAgAAAAIAAEAAAAFAAgAAAADAAIAAAAOAAgAAAAIAAEAAAAOAAcAAAADAAIAAAATAAoAAAAIAAcAAAASAAoAAAAFAAQAAAARAAoAAAADAAQAAAAQAAoAAAABAAQAAAAPAAoAAAADAAQAAAAOAAoAAAADAAQAAAANAAoAAAACAAUAAAAMAAoAAAABAAQAAAALAAoAAAACAAQAAAAKAAoAAAACAAQAAAAJAAoAAAAEAAQAAAAIAAoAAAACAAQAAAAHAAoAAAAEAAQAAAAGAAoAAAAEAAQAAAAFAAoAAAAEAAQAAAAEAAoAAAACAAUAAAADAAoAAAADAAQAAAACAAoAAAADAAQAAAABAAoAAAAAAAQAAAAAAAoAAAAIAAcAAAABAAsAAAAIAAcAAAATAAsAAAAIAAcAAAASAAsAAAAIAAcAAAARAAsAAAAIAAcAAAAQAAsAAAAIAAcAAAAPAAsAAAAIAAcAAAAOAAsAAAAIAAcAAAANAAsAAAAIAAcAAAAMAAsAAAAIAAcAAAALAAsAAAAIAAcAAAAKAAsAAAAIAAcAAAAJAAsAAAAIAAcAAAAIAAsAAAAIAAcAAAAHAAsAAAAIAAcAAAAGAAsAAAAIAAcAAAAFAAsAAAAIAAcAAAAEAAsAAAAIAAcAAAADAAsAAAAIAAcAAAACAAsAAAAIAAcAAAATAP//AAAIAAcAAAASAP//AAAIAAcAAAARAP//AAAIAAcAAAAQAP//AAAIAAcAAAAPAP//AAAIAAcAAAAOAP//AAAIAAcAAAANAP//AAAIAAcAAAAMAP//AAAIAAcAAAALAP//AAAIAAcAAAAKAP//AAAIAAcAAAAJAP//AAAIAAcAAAAIAP//AAAIAAcAAAAHAP//AAAIAAcAAAAGAP//AAAIAAcAAAAFAP//AAAIAAcAAAAEAP//AAAIAAcAAAADAP//AAAIAAcAAAACAP//AAAIAAcAAAABAP//AAAIAAcAAAAAAP//AAAIAAcAAAANAAcAAAAIAAEAAAAMAAcAAAAJAAEAAAALAAcAAAACAAcAAAAKAAcAAAACAAcAAAAJAAcAAAAAAAcAAAAIAAcAAAACAAcAAAAHAAcAAAADAAcAAAAGAAcAAAAJAAAAAAAFAAcAAAAIAAAAAAD//wkAAAAIAAcAAAD//wgAAAAIAAcAAAD//wcAAAAIAAcAAAD//wYAAAAIAAcAAAD//wUAAAAIAAcAAAD//wQAAAAIAAcAAAD//wMAAAAIAAcAAAD//wIAAAAIAAcAAAD//wEAAAAIAAcAAAD//wAAAAAIAAcAAAD/////AAAIAAcAAAAVAAsAAAAIAAcAAAAVAAoAAAAIAAcAAAAVAAkAAAAIAAcAAAAVAAgAAAAIAAcAAAAVAAcAAAAIAAcAAAAVAAYAAAAIAAcAAAAVAAUAAAAIAAcAAAAVAAQAAAAIAAcAAAAVAAMAAAAIAAcAAAAVAAIAAAAIAAcAAAAVAAEAAAAIAAcAAAAVAAAAAAAIAAcAAAAVAP//AAAIAAcAAAAUAAsAAAAIAAcAAAAUAAoAAAAIAAcAAAAUAAkAAAAIAAcAAAAUAAgAAAAIAAcAAAAUAAcAAAAIAAcAAAAUAAYAAAAIAAcAAAAUAAUAAAAIAAcAAAAUAAQAAAAIAAcAAAAUAAMAAAAIAAcAAAAUAAIAAAAIAAcAAAAUAAEAAAAIAAcAAAAUAAAAAAAIAAcAAAAUAP//AAAIAAcAAAAAAAsAAAAIAAcAAAD//wsAAAAIAAcAAAD//woAAAAIAAcAAAA=")
tile_set = ExtResource("5_q6wmg")

[node name="Objects" type="TileMapLayer" parent="Scenery"]
tile_map_data = PackedByteArray("AAAJAAUAAQADAAkAAAAHAAMAAQAHAAcAAAAMAAUAAQAIAAYAAAAHAAcAAQAEAAYAAAACAAcAAQABAAkAAAACAAIAAQABAAkAAAARAAcAAQABAAkAABARAAMAAQABAAkAABAGAAEAAQAAAAkAAAAOAAEAAQAAAAkAAAAEAAEAAQAFAAcAAAAQAAEAAQAEAAcAAAAMAAEAAQAEAAcAAAARAAIAAQAFAAYAAAADAAUAAQAJAAUAAAA=")
tile_set = ExtResource("6_y6fix")

[node name="World" type="Node2D" parent="."]

[node name="Doorway" parent="World" instance=ExtResource("7_0r5pm")]
position = Vector2(144, 32)

[node name="Monster" parent="World" instance=ExtResource("8_6rts0")]
position = Vector2(240, 48)

[node name="PathNodes" type="Node2D" parent="World/Monster"]

[node name="Marker2D3" type="Marker2D" parent="World/Monster/PathNodes"]
position = Vector2(0, 48)

[node name="Marker2D4" type="Marker2D" parent="World/Monster/PathNodes"]
position = Vector2(-128, 48)

[node name="Marker2D5" type="Marker2D" parent="World/Monster/PathNodes"]
position = Vector2(-128, 0)

[node name="Marker2D6" type="Marker2D" parent="World/Monster/PathNodes"]

[node name="Monster2" parent="World" instance=ExtResource("8_6rts0")]
position = Vector2(80, 64)

[node name="PathNodes" type="Node2D" parent="World/Monster2"]

[node name="Marker2D3" type="Marker2D" parent="World/Monster2/PathNodes"]
position = Vector2(48, 0)

[node name="Marker2D4" type="Marker2D" parent="World/Monster2/PathNodes"]
position = Vector2(48, 32)

[node name="Marker2D5" type="Marker2D" parent="World/Monster2/PathNodes"]
position = Vector2(0, 32)

[node name="Marker2D6" type="Marker2D" parent="World/Monster2/PathNodes"]

[node name="Key" parent="World" instance=ExtResource("9_8857f")]
position = Vector2(96, 80)

[node name="Player" parent="." instance=ExtResource("10_ssggo")]
unique_name_in_owner = true
position = Vector2(176, 80)
grid_position = Vector2i(11, 5)

[node name="HUD" parent="." instance=ExtResource("11_iibss")]
